{% extends 'layout.html' %}

{% block body %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


<style>
       .unselectable {
              -webkit-user-select: none;
              -webkit-touch-callout: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
              
            }
</style>



<p id="ending_time_of_exam" value="{{ending_time_of_exam}}" hidden>{{ending_time_of_exam}}</p>
<legend class="h2 btn-outline-info text-right" id="timmer"></legend>

<h5 class="flash text-center"> Remote Supervision(auto surveillance) is on ... </h5>
<div class="text-center">
       <img class="img-thumnail" src="{{ url_for('main.live_stream') }}" alt="surveillance"
              style="max-height: 10vh;">
</div>



<!-- timmer -->



<!-- <script>
       var parsed = JSON.parse('{#{question_mcq_for_current_session | tojson}#}');
       console.log(parsed);
</script> -->

{#{question_mcq_for_current_session}#}

       <form action="" method="POST" class="form-horizontal container" enctype="multipart/form-data">


              <br>

              <div class="card-block bg-light unselectable">
                     <div class="card-header ">
                            {{question_part}}
                     </div>
                     <div class="card-body h6">
                            {%for op in option_list%}

                            <div class="card-text text-secondary">
                                   <input id="chk {{op}}" aria - label="Checkbox for following text input"
                                          type="radio" value="{{op}}"
                                          name="selected_option" />

                                   <label for="chk {{op}}"> {{op}}</label>
                            </div>

                            {%endfor%}
                     </div>
              </div>

              {#{confrimation}#}



              <div class="text-center"><br>
                     <button class='btn btn-secondary' id="btn_submit" name="submit" type="submit"> Confirm
                            Answer & Next</button>
              </div>






       </form>



       <script>
       // Set the date we're counting down to
       //var countDownDate = new Date("Jan 5, 2022 15:37:25").getTime();

       const ending_time_of_exam = document.getElementById("ending_time_of_exam").getAttribute("value");


       countDownDate_end = new Date(ending_time_of_exam + "").getTime();

       // Update the count down every 1 second
       var x = setInterval(function () {

              // Get today's date and time
              var now = new Date().getTime();

              // Find the distance between now and the count down date
              var distance = countDownDate_end - now;

              // Time calculations for days, hours, minutes and seconds
              var days = Math.floor(distance / (1000 * 60 * 60 * 24));
              var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
              var seconds = Math.floor((distance % (1000 * 60)) / 1000);

              // Output the result in an element with id="demo"
              document.getElementById("timmer").innerHTML = hours + "h  "
                     + minutes + "m  " + seconds + "s  " ;

              // If the count down is over, write some text 
              if (distance < 0) {
                     clearInterval(x);
                     document.getElementById("timmer").innerHTML = "EXPIRED";
                     document.getElementById("btn_submit").submit();
              }
       }, 1000);
</script>


       {% endblock body %}




























       <!-- <script>

       $(document).ready(function () {
              load();
       });

       function load() {
              $('#add_data').focus();
              $('#btn_next_question').focus();
              $('#question_card').focus();
              var next_count = 1;
              var parse = 0;


              var questions = JSON.parse('{{question_mcq_for_current_session | tojson}}');
              console.log(questions);
              var viewQuestion = '';
              var question_block = $('#add_data');
              //var selected_option = $('#')

       $('#btn_next_question').click(function () {
              $('#question_card').empty();
              $('#add_data').empty();



   fetch(`/answer_session_load?c=${next_count}`).then(function (response) { response.json().then(function (recived_next_count) {
              $('#count').html(recived_next_count);
              console.log(typeof(recived_next_count));

       

              });
  });
});
}  

</script> -->






       <!--<script language="JavaScript" type="text/javascript" src="{#{ url_for('static',filename='answer_session.js') }#}">
 </script>-->